<h1>dynamical.org Zarr Weather Dataset Catalog</h1>
<p>
dynamical.org transforms weather data archives into the zarr file format, making
them easier to access.
This page contains the contents of dynamical.org's dataset catalog documentation,
concatenated into a single page designed to be read by an LLM or AI assistant.
</p>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>NOAA GFS analysis, hourly</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/noaa/gfs/analysis-hourly/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Global</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>0.25 degrees (~20km)</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>2015-01-15 00:00:00 UTC to 2024-07-01 00:00:00 UTC</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>1 hour</td>
            </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This analysis dataset is an archive of the model's best estimate of past weather.
        It is created by concatenating the first few hours of each historical forecast to
        provide a dataset with dimensions time, latitude, and longitude.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "NOAA GFS analysis, hourly",
    "description_short": "Historical weather data from the Global Forecast System (GFS) model operated by NOAA NCEP.",
    "url": "https://data.dynamical.org/noaa/gfs/analysis-hourly/latest.zarr",
    "spatial_domain": "Global",
    "spatial_resolution": "0.25 degrees (~20km)",
    "time_domain": "2015-01-15 00:00:00 UTC to 2024-07-01 00:00:00 UTC",
    "time_resolution": "1 hour",
    "dimensions": [
        {
            "name": "latitude",
            "min": "-90",
            "max": "90",
            "units": "decimal degrees"
        },
        {
            "name": "longitude",
            "min": "-180",
            "max": "179.75",
            "units": "decimal degrees"
        },
        {
            "name": "time",
            "min": "2015-01-15 00:00:00 UTC",
            "max": "2024-06-30 23:00:00 UTC",
            "units": "seconds since 1970-01-01 00:00:00"
        }
    ],
    "variables": [
        {
            "name": "precipitation_surface",
            "long_name": "Precipitation rate at earth surface",
            "units": "kg/(m^2 s)",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "temperature_2m",
            "long_name": "Temperature 2 meters above earth surface",
            "units": "C",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_u_10m",
            "long_name": "Wind speed u-component 10 meters above earth surface",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_v_10m",
            "long_name": "Wind speed v-component 10 meters above earth surface",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                NOAA GFS analysis, hourly is a dataset containing 4 variables across 3
                dimensions, covering
                Global at 0.25 degrees (~20km) resolution and
                2015-01-15 00:00:00 UTC to 2024-07-01 00:00:00 UTC at 1 hour resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/noaa/gfs/analysis-hourly/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>Construction</h3>
        <p>
        GFS starts a new model run every 6 hours and
        dynamical.org has created this analysis by concatenating the first 6
        hours of each forecast along the time dimension.
        </p>

        <h3>Interpolation</h3>
        <p>
        Before 2021-02-27 GFS had a 3 hourly step at early forecast hours.
        In this reanalysis we have used linear interpolation in the time
        dimension to fill in the two timesteps between the three-hourly
        values prior to 2021-02-27.
        </p>

        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        representation to improve compression. We round to retain 9 bits of
        the floating point number's mantissa (a 10 digit significand) which
        creates a maximum of 0.2% difference between the original and rounded value. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information.
        </p>
      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - NOAA GFS analysis, hourly</div>
                    <div class="frameHeaderSubtitle">Mean temperature for a single day</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Mean temperature for a single day
# Dataset: NOAA GFS analysis, hourly
# This code demonstrates how to access and process the NOAA GFS analysis, hourly dataset


import xarray as xr

ds = xr.open_zarr("https://data.dynamical.org/noaa/gfs/analysis-hourly/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(time="2024-06-01T00:00").mean().compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the NOAA GFS analysis, hourly dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/noaa-gfs-analysis-hourly.ipynb">https://github.com/dynamical-org/notebooks/blob/main/noaa-gfs-analysis-hourly.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "code",
      "execution_count": 1,
      "metadata": {},
      "outputs": [],
      "source": [
        "%pip install xarray[complete]"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {},
      "outputs": [],
      "source": [
        "import xarray as xr"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 2,
      "metadata": {},
      "outputs": [],
      "source": [
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/gfs/analysis-hourly/latest.zarr?email=optional@email.com\")\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 3,
      "metadata": {},
      "outputs": [],
      "source": [
        "ds[\"temperature_2m\"].sel(\n",
        "    time=\"2024-02-01T00:00\",\n",
        "    latitude=slice(70, 0),\n",
        "    longitude=slice(0, 70),\n",
        ").plot()"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 4,
      "metadata": {},
      "outputs": [],
      "source": [
        "(\n",
        "  ds[\"precipitation_surface\"]\n",
        "    .sel(latitude=19.1, longitude=72.9, method=\"nearest\") # Mumbai, India\n",
        "    .sel(time=slice(\"2023-01-01\", \"2024-01-01\"))\n",
        "    .plot()\n",
        ")\n",
        "# Can you spot monsoon season?"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 5,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Run this cell yourself to create an interactive animation\n",
        "from IPython.display import HTML\n",
        "from matplotlib.animation import FuncAnimation\n",
        "import matplotlib.pyplot as plt\n",
        "import numpy as np\n",
        "\n",
        "wind_speed = (\n",
        "    np.sqrt(ds[\"wind_u_10m\"]**2 + ds[\"wind_v_10m\"]**2)\n",
        "    .sel(\n",
        "        time=slice(\"2023-08-28T00\", \"2023-09-01\"),\n",
        "        latitude=slice(45, 18),\n",
        "        longitude=slice(-92, -55)\n",
        "    )\n",
        "    .load()\n",
        ")\n",
        "\n",
        "fig, ax = plt.subplots()\n",
        "ax.set_title(\"Hurricane Idalia, August 2023\")\n",
        "ax.axis(\"off\")\n",
        "\n",
        "img = ax.imshow(wind_speed.isel(time=0), cmap='YlGnBu_r')\n",
        "anim = FuncAnimation(fig=fig, frames=wind_speed, func=lambda frame: img.set_data(frame), interval=60)\n",
        "\n",
        "HTML(anim.to_jshtml())"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": ".venv",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.10.12"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}</pre>
            </div>
        
    </div>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>NOAA GFS forecast</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/noaa/gfs/forecast/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Global</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>0.25 degrees (~20km)</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>Forecasts initialized 2021-05-01 00:00:00 UTC to Present</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>Forecasts initialized every 6 hours</td>
            </tr>
            
                <tr>
                    <td>Forecast domain</td>
                    <td>Forecast lead time 0-384 hours (0-16 days) ahead</td>
                </tr>
                <tr>
                    <td>Forecast resolution</td>
                    <td>Forecast step 0-120 hours: hourly, 123-384 hours: 3 hourly</td>
                </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This dataset is an archive of past and present GFS forecasts. Forecasts
        are identified by an initialization time (<code>init_time</code>) denoting the
        start time of the model run. Each forecast steps forward in time along the
        <code>lead_time</code> dimension.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "NOAA GFS forecast",
    "description_short": "Weather forecasts from the Global Forecast System (GFS) operated by NOAA NWS NCEP.",
    "url": "https://data.dynamical.org/noaa/gfs/forecast/latest.zarr",
    "spatial_domain": "Global",
    "spatial_resolution": "0.25 degrees (~20km)",
    "time_domain": "Forecasts initialized 2021-05-01 00:00:00 UTC to Present",
    "time_resolution": "Forecasts initialized every 6 hours",
    "forecast_domain": "Forecast lead time 0-384 hours (0-16 days) ahead",
    "forecast_resolution": "Forecast step 0-120 hours: hourly, 123-384 hours: 3 hourly",
    "dimensions": [
        {
            "name": "init_time",
            "min": "2021-05-01T00:00:00",
            "max": "Present",
            "units": "seconds since 1970-01-01"
        },
        {
            "name": "latitude",
            "min": "-90",
            "max": "90",
            "units": "degrees_north"
        },
        {
            "name": "lead_time",
            "min": "0 days 00:00:00",
            "max": "16 days 00:00:00",
            "units": "seconds"
        },
        {
            "name": "longitude",
            "min": "-180",
            "max": "179.75",
            "units": "degrees_east"
        }
    ],
    "variables": [
        {
            "name": "categorical_freezing_rain_surface",
            "long_name": "Categorical freezing rain",
            "units": "0=no; 1=yes",
            "comment": "Presence/absence over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_ice_pellets_surface",
            "long_name": "Categorical ice pellets",
            "units": "0=no; 1=yes",
            "comment": "Presence/absence over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_rain_surface",
            "long_name": "Categorical rain",
            "units": "0=no; 1=yes",
            "comment": "Presence/absence over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_snow_surface",
            "long_name": "Categorical snow",
            "units": "0=no; 1=yes",
            "comment": "Presence/absence over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "downward_long_wave_radiation_flux_surface",
            "long_name": "Surface downward long-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "downward_short_wave_radiation_flux_surface",
            "long_name": "Surface downward short-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "expected_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "geopotential_height_cloud_ceiling",
            "long_name": "Geopotential height",
            "units": "gpm",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "ingested_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "maximum_temperature_2m",
            "long_name": "Maximum temperature",
            "units": "C",
            "comment": "Maximum over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "minimum_temperature_2m",
            "long_name": "Minimum temperature",
            "units": "C",
            "comment": "Minimum over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "percent_frozen_precipitation_surface",
            "long_name": "Percent frozen precipitation",
            "units": "%",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "precipitable_water_atmosphere",
            "long_name": "Precipitable water",
            "units": "kg/(m^2)",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "precipitation_surface",
            "long_name": "Total Precipitation",
            "units": "mm/s",
            "comment": "Average precipitation rate since the previous forecast step.",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "pressure_reduced_to_mean_sea_level",
            "long_name": "Pressure reduced to MSL",
            "units": "Pa",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "pressure_surface",
            "long_name": "Surface pressure",
            "units": "Pa",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "relative_humidity_2m",
            "long_name": "2 metre relative humidity",
            "units": "%",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "temperature_2m",
            "long_name": "2 metre temperature",
            "units": "C",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "total_cloud_cover_atmosphere",
            "long_name": "Total Cloud Cover",
            "units": "%",
            "comment": "Average over the previous 1-6 hours, reset every 6-hour forecast step (00Z, 06Z, 12Z, 18Z).",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "valid_time",
            "long_name": "",
            "units": "seconds since 1970-01-01",
            "dimensions": "init_time × lead_time"
        },
        {
            "name": "wind_u_100m",
            "long_name": "100 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "wind_u_10m",
            "long_name": "10 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "wind_v_100m",
            "long_name": "100 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × latitude × longitude"
        },
        {
            "name": "wind_v_10m",
            "long_name": "10 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × latitude × longitude"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                NOAA GFS forecast is a dataset containing 24 variables across 4
                dimensions, covering
                Global at 0.25 degrees (~20km) resolution and
                Forecasts initialized 2021-05-01 00:00:00 UTC to Present at Forecasts initialized every 6 hours resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                forecasting and prediction models,
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/noaa/gfs/forecast/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        Icechunk storage generously provided by <a href="https://opendata.aws.amazon.com/">AWS Open Data</a>.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        floating point representation to improve compression. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information on this approach. The exact number of rounded bits
        can be found in our
        <a href="https://github.com/dynamical-org/reformatters/blob/main/src/reformatters/noaa/gfs/forecast/template_config.py">reformatting code</a>.
        </p>
      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - NOAA GFS forecast</div>
                    <div class="frameHeaderSubtitle">Maximum temperature in a forecast</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Maximum temperature in a forecast
# Dataset: NOAA GFS forecast
# This code demonstrates how to access and process the NOAA GFS forecast dataset


import xarray as xr  # xarray>=2025.1.2 and zarr>=3.0.8 for zarr v3 support

ds = xr.open_zarr("https://data.dynamical.org/noaa/gfs/forecast/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(init_time="2025-01-01T00", latitude=0, longitude=0).max().compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the NOAA GFS forecast dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/noaa-gfs-forecast.ipynb">https://github.com/dynamical-org/notebooks/blob/main/noaa-gfs-forecast.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "# Quickstart: NOAA GFS forecast - dynamical.org Zarr\n",
        "A brief introduction to the NOAA GFS forecast dataset transformed into an analysis-ready, cloud-optimized format by dynamical.org.\n",
        "\n",
        "Dataset documentation: https://dynamical.org/catalog/noaa-gfs-forecast/"
      ],
      "outputs": []
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {},
      "outputs": [],
      "source": [
        "# If running locally, follow README.md for simple dependency installation.\n",
        "# If using Google Colab, run this cell and then restart the notebook.\n",
        "%pip install \"xarray[complete]>=2025.1.2\" \"zarr>=3.0.8\" requests aiohttp"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 58,
      "metadata": {},
      "outputs": [],
      "source": [
        "import xarray as xr\n",
        "\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/gfs/forecast/latest.zarr?email=optional@email.com\", decode_timedelta=True, chunks=None)\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 70,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Plot one precipitation forecast in Shanghai\n",
        "plot_ds = ds.sel(init_time=\"2024-09-15T00\", latitude=31.2, longitude=121.4, method=\"nearest\")\n",
        "_ = plot_ds[\"precipitation_surface\"].plot(x=\"valid_time\", figsize=(10, 5))"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 60,
      "metadata": {},
      "outputs": [],
      "source": [
        "# 4 day ahead forecast of 2 meter air temperature from the 2025-02-01 00:00 UTC model initialization\n",
        "(\n",
        "    ds[\"temperature_2m\"]\n",
        "    .sel(init_time=\"2025-02-01T00\", lead_time=\"4d\")\n",
        "    .sel(latitude=slice(60, -60), longitude=slice(-160, -20))\n",
        "    .plot(figsize=(8, 8))\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 61,
      "metadata": {},
      "outputs": [],
      "source": [
        "from IPython.display import HTML\n",
        "from matplotlib.animation import FuncAnimation\n",
        "import matplotlib.pyplot as plt\n",
        "\n",
        "# An interactive animation of the February 2024 atmospheric river in the Pacific Ocean\n",
        "\n",
        "data = (\n",
        "    ds[\"precipitable_water_atmosphere\"]\n",
        "    .sel(\n",
        "        init_time=\"2024-01-28T00\",\n",
        "        lead_time=slice(\"0h\", \"4d\"),\n",
        "        latitude=slice(60, 20),  \n",
        "        longitude=slice(-170, -100), \n",
        "    ).load()\n",
        ")\n",
        "\n",
        "dpi=150\n",
        "fig, ax = plt.subplots(figsize=(data.longitude.size/(dpi/2), data.latitude.size/(dpi/2)), dpi=dpi)\n",
        "fig.subplots_adjust(left=0, right=1, top=1, bottom=0)\n",
        "ax.axis(\"off\")\n",
        "\n",
        "img = ax.imshow(data.isel(lead_time=0), cmap='magma')\n",
        "anim = FuncAnimation(fig=fig, frames=data, func=lambda frame: img.set_data(frame), interval=80)\n",
        "\n",
        "HTML(anim.to_jshtml())"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": ".venv",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.6"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}</pre>
            </div>
        
    </div>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>NOAA GEFS forecast, 35 day</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Global</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>0-240 hours: 0.25 degrees (~20km), 243-840 hours: 0.5 degrees (~40km)</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>Forecasts initialized 2020-10-01 00:00:00 UTC to Present</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>Forecasts initialized every 24 hours</td>
            </tr>
            
                <tr>
                    <td>Forecast domain</td>
                    <td>Forecast lead time 0-840 hours (0-35 days) ahead</td>
                </tr>
                <tr>
                    <td>Forecast resolution</td>
                    <td>Forecast step 0-240 hours: 3 hourly, 243-840 hours: 6 hourly</td>
                </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This dataset is an archive of past and present GEFS forecasts. Forecasts
        are identified by an initialization time (<code>init_time</code>) denoting the
        start time of the model run as well as by the <code>ensemble_member</code>.
        Each forecast has a 3 hourly forecast step along the <code>lead_time</code>
        dimension. This dataset contains only the 00 hour UTC initialization times
        which produce the full length, 35 day forecast.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "NOAA GEFS forecast, 35 day",
    "description_short": "Weather forecasts from the Global Ensemble Forecast System (GEFS) operated by NOAA NWS NCEP.",
    "url": "https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr",
    "spatial_domain": "Global",
    "spatial_resolution": "0-240 hours: 0.25 degrees (~20km), 243-840 hours: 0.5 degrees (~40km)",
    "time_domain": "Forecasts initialized 2020-10-01 00:00:00 UTC to Present",
    "time_resolution": "Forecasts initialized every 24 hours",
    "forecast_domain": "Forecast lead time 0-840 hours (0-35 days) ahead",
    "forecast_resolution": "Forecast step 0-240 hours: 3 hourly, 243-840 hours: 6 hourly",
    "dimensions": [
        {
            "name": "ensemble_member",
            "min": "0",
            "max": "30",
            "units": "realization"
        },
        {
            "name": "init_time",
            "min": "2020-10-01T00:00:00",
            "max": "Present",
            "units": "seconds since 1970-01-01"
        },
        {
            "name": "latitude",
            "min": "-90",
            "max": "90",
            "units": "degrees_north"
        },
        {
            "name": "lead_time",
            "min": "0 days 00:00:00",
            "max": "35 days 00:00:00",
            "units": "seconds"
        },
        {
            "name": "longitude",
            "min": "-180",
            "max": "179.75",
            "units": "degrees_east"
        }
    ],
    "variables": [
        {
            "name": "categorical_freezing_rain_surface",
            "long_name": "Categorical freezing rain",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_ice_pellets_surface",
            "long_name": "Categorical ice pellets",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_rain_surface",
            "long_name": "Categorical rain",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "categorical_snow_surface",
            "long_name": "Categorical snow",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "downward_long_wave_radiation_flux_surface",
            "long_name": "Surface downward long-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "downward_short_wave_radiation_flux_surface",
            "long_name": "Surface downward short-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "expected_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "geopotential_height_cloud_ceiling",
            "long_name": "Geopotential height",
            "units": "gpm",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "ingested_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time × ensemble_member"
        },
        {
            "name": "maximum_temperature_2m",
            "long_name": "Maximum temperature",
            "units": "C",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "minimum_temperature_2m",
            "long_name": "Minimum temperature",
            "units": "C",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "percent_frozen_precipitation_surface",
            "long_name": "Percent frozen precipitation",
            "units": "%",
            "comment": "Contains the value -50 when there is no precipitation.",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "precipitable_water_atmosphere",
            "long_name": "Precipitable water",
            "units": "kg/(m^2)",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "precipitation_surface",
            "long_name": "Total Precipitation",
            "units": "mm/s",
            "comment": "Average precipitation rate since the previous forecast step.",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "pressure_reduced_to_mean_sea_level",
            "long_name": "Pressure reduced to MSL",
            "units": "Pa",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "pressure_surface",
            "long_name": "Surface pressure",
            "units": "Pa",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "relative_humidity_2m",
            "long_name": "2 metre relative humidity",
            "units": "%",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "temperature_2m",
            "long_name": "2 metre temperature",
            "units": "C",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "total_cloud_cover_atmosphere",
            "long_name": "Total Cloud Cover",
            "units": "%",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "valid_time",
            "long_name": "",
            "units": "seconds since 1970-01-01",
            "dimensions": "init_time × lead_time"
        },
        {
            "name": "wind_u_100m",
            "long_name": "100 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "wind_u_10m",
            "long_name": "10 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "wind_v_100m",
            "long_name": "100 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        },
        {
            "name": "wind_v_10m",
            "long_name": "10 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × ensemble_member × lead_time × latitude × longitude"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                NOAA GEFS forecast, 35 day is a dataset containing 24 variables across 5
                dimensions, covering
                Global at 0-240 hours: 0.25 degrees (~20km), 243-840 hours: 0.5 degrees (~40km) resolution and
                Forecasts initialized 2020-10-01 00:00:00 UTC to Present at Forecasts initialized every 24 hours resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                forecasting and prediction models,
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>Interpolation</h3>
        <p>
        Source data is available at both 0.25-degree and 0.5-degree resolutions.
        All variables except the 100m wind components are derived
        from a 0.25-degree grid for the first 240 hours of each forecast and from a
        0.5-degree grid for the remainder. 100m wind components are derived from
        a 0.5-degree grid for all lead times. Bilinear interpolation is used to convert
        0.5-degree data to a 0.25-degree grid. The original 0.5-degree values can be
        retrieved by selecting every other pixel starting from offset 0 in both the
        latitude and longitude dimensions (e.g. <code>array[::2, ::2]</code>).
        </p>

        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        floating point representation to improve compression. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information on this approach. The exact number of rounded bits
        can be found in our
        <a href="https://github.com/dynamical-org/reformatters/blob/main/src/reformatters/noaa/gefs/common_gefs_template_config.py">reformatting code</a>.
        </p>
      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - NOAA GEFS forecast, 35 day</div>
                    <div class="frameHeaderSubtitle">Maximum temperature in ensemble forecast</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Maximum temperature in ensemble forecast
# Dataset: NOAA GEFS forecast, 35 day
# This code demonstrates how to access and process the NOAA GEFS forecast, 35 day dataset


import xarray as xr  # xarray>=2025.1.2 and zarr>=3.0.8 for zarr v3 support

ds = xr.open_zarr("https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(init_time="2025-01-01T00", latitude=0, longitude=0).max().compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the NOAA GEFS forecast, 35 day dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/noaa-gefs-forecast-35-day.ipynb">https://github.com/dynamical-org/notebooks/blob/main/noaa-gefs-forecast-35-day.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "# Quickstart: NOAA GEFS forecast, 35 day - dynamical.org Zarr\n",
        "A brief introduction to the NOAA GEFS forecast dataset transformed into an analysis-ready, cloud-optimized format by dynamical.org.\n",
        "\n",
        "Dataset documentation: https://dynamical.org/catalog/noaa-gefs-forecast-35-day/\n"
      ],
      "outputs": []
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {},
      "outputs": [],
      "source": [
        "# If running locally, follow README.md for simple dependency installation.\n",
        "# If using Google Colab, run this cell and then restart the notebook.\n",
        "%pip install \"xarray[complete]>=2025.1.2\" \"zarr>=3.0.8\" requests aiohttp"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 2,
      "metadata": {},
      "outputs": [],
      "source": [
        "import xarray as xr\n",
        "\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr?email=optional@email.com\", decode_timedelta=True, chunks=None)\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 3,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Plot the ensemble traces of the 2025-01-01 forecast at a point on the earth\n",
        "plot_ds = ds.sel(init_time=\"2025-01-01T00\", latitude=-23.5, longitude=-46.6, method=\"nearest\")  # São Paulo, Brazil\n",
        "_ = plot_ds[\"temperature_2m\"].plot(x=\"valid_time\", hue=\"ensemble_member\", figsize=(12, 8))"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 4,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Plot a summary of the ensemble distribution using quantiles\n",
        "plot_ds = ds.sel(init_time=\"2024-07-01T00\", latitude=0, longitude=0)\n",
        "(\n",
        "    plot_ds[\"temperature_2m\"]\n",
        "    .quantile([0.05, 0.25, 0.5, 0.75, 0.95], dim=\"ensemble_member\")\n",
        "    .plot(x=\"valid_time\", hue=\"quantile\")\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 5,
      "metadata": {},
      "outputs": [],
      "source": [
        "# The following larger area examples run faster using dask which happens by default if you omit chunks=None\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/gefs/forecast-35-day/latest.zarr?email=optional@email.com\", decode_timedelta=True)"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 6,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Calculate a quantile across ensemble members and display the result as a map\n",
        "(\n",
        "    ds[\"temperature_2m\"]\n",
        "    .sel(init_time=\"2025-01-01T00\")\n",
        "    .sel(lead_time=\"7d\")\n",
        "    .sel(latitude=slice(70, 20), longitude=slice(0, 50))\n",
        "    .quantile(0.25, dim=\"ensemble_member\") # 25% chance it gets colder than this\n",
        "    .plot()\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 7,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Highlight areas of uncertainty in temperature forecast over the first 7 days of 2025\n",
        "\n",
        "import matplotlib.pyplot as plt\n",
        "\n",
        "plot_ds = (\n",
        "    ds.sel(init_time=\"2024-03-01T00\")\n",
        "    .sel(latitude=slice(-8, -46), longitude=slice(112, 154))  # Australia\n",
        "    .sel(lead_time=slice(\"0h\", \"6d\")).mean(dim=\"lead_time\")  # Average the first week of the forecast\n",
        ")\n",
        "\n",
        "# Standard deviation across ensemble members to highlight regions of forecast uncertainty\n",
        "plot_ds[\"temperature_2m\"].std(dim=\"ensemble_member\").plot()\n",
        "plt.title(f\"Ensemble standard deviation 2 meter temperature [{ds['temperature_2m'].attrs['units']}]\")\n",
        "\n",
        "plt.tight_layout()"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "notebooks",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}</pre>
            </div>
        
    </div>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>NOAA GEFS analysis</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/noaa/gefs/analysis/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Global</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>0.25 degrees (~20km)</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>2000-01-01 00:00:00 UTC to Present</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>3.0 hours</td>
            </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This analysis dataset is an archive of the model's best estimate of past weather.
        It is created by concatenating the first few hours of each historical forecast to
        provide a dataset with dimensions time, latitude, and longitude.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "NOAA GEFS analysis",
    "description_short": "Weather analysis from the Global Ensemble Forecast System (GEFS) operated by NOAA NWS NCEP.",
    "url": "https://data.dynamical.org/noaa/gefs/analysis/latest.zarr",
    "spatial_domain": "Global",
    "spatial_resolution": "0.25 degrees (~20km)",
    "time_domain": "2000-01-01 00:00:00 UTC to Present",
    "time_resolution": "3.0 hours",
    "dimensions": [
        {
            "name": "latitude",
            "min": "-90",
            "max": "90",
            "units": "degrees_north"
        },
        {
            "name": "longitude",
            "min": "-180",
            "max": "179.75",
            "units": "degrees_east"
        },
        {
            "name": "time",
            "min": "2000-01-01T00:00:00",
            "max": "Present",
            "units": "seconds since 1970-01-01"
        }
    ],
    "variables": [
        {
            "name": "categorical_freezing_rain_surface",
            "long_name": "Categorical freezing rain",
            "units": "0=no; 1=yes",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "categorical_ice_pellets_surface",
            "long_name": "Categorical ice pellets",
            "units": "0=no; 1=yes",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "categorical_rain_surface",
            "long_name": "Categorical rain",
            "units": "0=no; 1=yes",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "categorical_snow_surface",
            "long_name": "Categorical snow",
            "units": "0=no; 1=yes",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "downward_long_wave_radiation_flux_surface",
            "long_name": "Surface downward long-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "downward_short_wave_radiation_flux_surface",
            "long_name": "Surface downward short-wave radiation flux",
            "units": "W/(m^2)",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "geopotential_height_cloud_ceiling",
            "long_name": "Geopotential height",
            "units": "gpm",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "maximum_temperature_2m",
            "long_name": "Maximum temperature",
            "units": "C",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "minimum_temperature_2m",
            "long_name": "Minimum temperature",
            "units": "C",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "percent_frozen_precipitation_surface",
            "long_name": "Percent frozen precipitation",
            "units": "%",
            "comment": "Contains the value -50 when there is no precipitation.",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "precipitable_water_atmosphere",
            "long_name": "Precipitable water",
            "units": "kg/(m^2)",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "precipitation_surface",
            "long_name": "Total Precipitation",
            "units": "mm/s",
            "comment": "Average precipitation rate since the previous forecast step.",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "pressure_reduced_to_mean_sea_level",
            "long_name": "Pressure reduced to MSL",
            "units": "Pa",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "pressure_surface",
            "long_name": "Surface pressure",
            "units": "Pa",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "relative_humidity_2m",
            "long_name": "2 metre relative humidity",
            "units": "%",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "temperature_2m",
            "long_name": "2 metre temperature",
            "units": "C",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "total_cloud_cover_atmosphere",
            "long_name": "Total Cloud Cover",
            "units": "%",
            "comment": "Average value in the last 6 hour period (00, 06, 12, 18 UTC) or 3 hour period (03, 09, 15, 21 UTC).",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_u_100m",
            "long_name": "100 metre U wind component",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_u_10m",
            "long_name": "10 metre U wind component",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_v_100m",
            "long_name": "100 metre V wind component",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        },
        {
            "name": "wind_v_10m",
            "long_name": "10 metre V wind component",
            "units": "m/s",
            "dimensions": "time × latitude × longitude"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                NOAA GEFS analysis is a dataset containing 21 variables across 3
                dimensions, covering
                Global at 0.25 degrees (~20km) resolution and
                2000-01-01 00:00:00 UTC to Present at 3.0 hours resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/noaa/gefs/analysis/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>Sources</h3>
        <p>
        To provide the longest possible historical record, this dataset in constructed
        from three distinct GEFS forecast archives.
        </p>
        <ul>
          <li>From 2000-01-01 to 2019-12-31 we use the <a href="https://registry.opendata.aws/noaa-gefs-reforecast/">GEFS reforecast</a>.</li>
          <li>From 2020-01-01 to 2020-09-23 we use <a href="https://registry.opendata.aws/noaa-gefs/">GEFS forecast archive</a> data which has a lower spatial and temporal resolution.</li>
          <li>From 2020-09-23 to Present we use <a href="https://registry.opendata.aws/noaa-gefs/">GEFS operational forecast archives</a>.</li>
        </ul>

        <h3>Variable availability</h3>
        <p>
        Data is available for all variables at all times with the following exceptions.
        </p>
        <ul>
          <li>Unavailable before 2020-01-01:
            <code>relative_humidity_2m</code>,
            <code>percent_frozen_precipitation_surface</code>,
            <code>categorical_freezing_rain_surface</code>,
            <code>categorical_ice_pellets_surface</code>,
            <code>categorical_rain_surface</code>,
            <code>categorical_snow_surface</code>
          </li>
          <li>Unavailable 2020-01-01T00 to 2020-09-22T21:
            <code>geopotential_height_cloud_ceiling</code>
          </li>
        </ul>

        <h3>Construction</h3>
        <p>
        To create a single time dimension we concatenate the first few hours of each forecast.
        From 2000-01-01 to 2019-12-31 reforecasts are available once per day and this dataset
        uses the first 21 or 24 hours of each forecast. From 2020-01-01 to present forecasts
        are available every 6 hours and this dataset uses the first 3 or 6 hours of each forecast.
        Variables with an instantaneous <code>step_type</code> use the shortest possible lead times
        (e.g. 0 and 3 hours) while accumulated variables must use one additional forecast
        step (e.g. 3 and 6 hours) because they do not have an hour 0 forecast value.
        </p>

        <h3>Interpolation</h3>
        <p>
        For most of the time range of the archive the source data is available at 0.25-degree
        resolution and a 3 hourly time step and we perform no interpolation. There are two
        exceptions to this. 1) From 2020-01-01 to 2020-09-23 the source data has a 1.0-degree
        spatial resolution and a 6 hourly time step. 2) From 2020-09-23 to present the 100m
        wind components have a 0.5-degree spatial resolution in the source data.
        To provide a consistent archive in the above two cases we first perform bilinear
        interpolation in space to 0.25-degree resolution followed by linear interpolation in time
        to a 3-hourly timestep if necessary. The original, uninterpolated data can be obtained
        by selecting latitudes and longitudes evenly divisible by 1 and, in case 1), time steps
        whose hour is divisible by 6.
        </p>

        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        floating point representation to improve compression. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information on this approach. The exact number of rounded bits
        can be found in our
        <a href="https://github.com/dynamical-org/reformatters/blob/main/src/reformatters/noaa/gefs/common_gefs_template_config.py">reformatting code</a>.
        </p>

      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - NOAA GEFS analysis</div>
                    <div class="frameHeaderSubtitle">Temperature at a specific place and time</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Temperature at a specific place and time
# Dataset: NOAA GEFS analysis
# This code demonstrates how to access and process the NOAA GEFS analysis dataset


import xarray as xr  # xarray>=2025.1.2 and zarr>=3.0.8 for zarr v3 support

ds = xr.open_zarr("https://data.dynamical.org/noaa/gefs/analysis/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(time="2025-01-01T00", latitude=0, longitude=0).compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the NOAA GEFS analysis dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/noaa-gefs-analysis.ipynb">https://github.com/dynamical-org/notebooks/blob/main/noaa-gefs-analysis.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "# Quickstart: NOAA GEFS analysis - dynamical.org Zarr\n",
        "A brief introduction to the NOAA GEFS analysis dataset transformed into an analysis-ready, cloud-optimized format by dynamical.org.\n",
        "\n",
        "Dataset documentation: https://dynamical.org/catalog/noaa-gefs-analysis/"
      ],
      "outputs": []
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {},
      "outputs": [],
      "source": [
        "# If running locally, follow README.md for simple dependency installation.\n",
        "# If using Google Colab, run this cell and then restart the notebook.\n",
        "%pip install \"xarray[complete]>=2025.1.2\" \"zarr>=3.0.8\" requests aiohttp"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 2,
      "metadata": {},
      "outputs": [],
      "source": [
        "import xarray as xr\n",
        "\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/gefs/analysis/latest.zarr\", chunks=None)\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 3,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Precipitation over time in Ulaanbaatar, Mongolia\n",
        "ds[\"precipitation_surface\"].sel(latitude=47.9, longitude=106.9, method=\"nearest\").plot()"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 4,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Map of temperature across Africa at the earliest available time in the dataset\n",
        "ds[\"temperature_2m\"].sel(\n",
        "    time=\"2000-01-01T03:00\",\n",
        "    latitude=slice(50, -30),\n",
        "    longitude=slice(-30, 60),\n",
        ").plot()"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 5,
      "metadata": {},
      "outputs": [],
      "source": [
        "import pandas as pd\n",
        "\n",
        "# Select multiple locations and aggregate precipitation to 10 day averages\n",
        "\n",
        "cities = pd.DataFrame([\n",
        "    {\"city\": \"Mumbai\",    \"latitude\":  19.07, \"longitude\":  72.87},\n",
        "    {\"city\": \"Sao Paulo\", \"latitude\": -23.55, \"longitude\": -46.63},\n",
        "    {\"city\": \"Sydney\",    \"latitude\": -33.87, \"longitude\": 151.21},\n",
        "]).set_index(\"city\").to_xarray()\n",
        "\n",
        "(\n",
        "  ds[\"precipitation_surface\"]\n",
        "    .sel(time=slice(\"2015\", \"2025\"))\n",
        "    .sel(latitude=cities.latitude, longitude=cities.longitude, method=\"nearest\")\n",
        "    .resample(time=\"10d\").mean()\n",
        "    .plot(hue=\"city\", size=6, aspect=3)\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 6,
      "metadata": {},
      "outputs": [],
      "source": [
        "from IPython.display import HTML\n",
        "from matplotlib.animation import FuncAnimation\n",
        "import matplotlib.pyplot as plt\n",
        "\n",
        "# An interactive animation of precipitable water in the atmosphere during Typhoon Mawar\n",
        "\n",
        "data = (\n",
        "    ds[\"precipitable_water_atmosphere\"]\n",
        "    .sel( # Typhoon Mawar\n",
        "        time=slice(\"2023-05-24T00\", \"2023-06-05T00\"),\n",
        "        latitude=slice(50, -10),  \n",
        "        longitude=slice(105, 180), \n",
        "    ).load()\n",
        ")\n",
        "\n",
        "dpi=200\n",
        "fig, ax = plt.subplots(figsize=(data.longitude.size/dpi, data.latitude.size/dpi), dpi=dpi)\n",
        "fig.subplots_adjust(left=0, right=1, top=1, bottom=0)\n",
        "ax.axis(\"off\")\n",
        "\n",
        "img = ax.imshow(data.isel(time=0), cmap='magma', vmin=0, vmax=75)\n",
        "anim = FuncAnimation(fig=fig, frames=data, func=lambda frame: img.set_data(frame), interval=80)\n",
        "\n",
        "HTML(anim.to_jshtml())"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "notebooks",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}</pre>
            </div>
        
    </div>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>NOAA HRRR forecast, 48 hour</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/noaa/hrrr/forecast-48-hour/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Continental United States</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>3km</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>Forecasts initialized 2018-07-13 12:00:00 UTC to Present</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>Forecasts initialized every 6 hours</td>
            </tr>
            
                <tr>
                    <td>Forecast domain</td>
                    <td>Forecast lead time 0-48 hours ahead</td>
                </tr>
                <tr>
                    <td>Forecast resolution</td>
                    <td>Hourly</td>
                </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This dataset is an archive of past and present HRRR forecasts. Forecasts
        are identified by an initialization time (<code>init_time</code>) denoting the
        start time of the model run.
        Each forecast has an hourly forecast step along the <code>lead_time</code>
        dimension. This dataset contains only the 00, 06, 12, and 18 hour UTC
        initialization times which produce the full length, 48 hour forecast.
        </p>

        <p>
        This dataset uses the native HRRR Lambert Conformal Conic projection,
        with spatial indexing along the <code>x</code> and <code>y</code> dimensions.
        The example notebook shows how to use the embedded spatial reference to
        select geographic areas of interest.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "NOAA HRRR forecast, 48 hour",
    "description_short": "Weather forecasts from the High Resolution Rapid Refresh (HRRR) model operated by NOAA NWS NCEP.",
    "url": "https://data.dynamical.org/noaa/hrrr/forecast-48-hour/latest.zarr",
    "spatial_domain": "Continental United States",
    "spatial_resolution": "3km",
    "time_domain": "Forecasts initialized 2018-07-13 12:00:00 UTC to Present",
    "time_resolution": "Forecasts initialized every 6 hours",
    "forecast_domain": "Forecast lead time 0-48 hours ahead",
    "forecast_resolution": "Hourly",
    "dimensions": [
        {
            "name": "init_time",
            "min": "2018-07-13T12:00:00",
            "max": "Present",
            "units": "seconds since 1970-01-01"
        },
        {
            "name": "lead_time",
            "min": "0 days 00:00:00",
            "max": "2 days 00:00:00",
            "units": "seconds"
        },
        {
            "name": "x",
            "min": "-2700000",
            "max": "2700000",
            "units": "m"
        },
        {
            "name": "y",
            "min": "-1600000",
            "max": "1600000",
            "units": "m"
        }
    ],
    "variables": [
        {
            "name": "categorical_freezing_rain_surface",
            "long_name": "Categorical freezing rain",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "categorical_ice_pellets_surface",
            "long_name": "Categorical ice pellets",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "categorical_rain_surface",
            "long_name": "Categorical rain",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "categorical_snow_surface",
            "long_name": "Categorical snow",
            "units": "0=no; 1=yes",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "composite_reflectivity",
            "long_name": "Composite reflectivity",
            "units": "dBZ",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "downward_long_wave_radiation_flux_surface",
            "long_name": "Surface downward long-wave radiation flux",
            "units": "W/(m^2)",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "downward_short_wave_radiation_flux_surface",
            "long_name": "Surface downward short-wave radiation flux",
            "units": "W/(m^2)",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "expected_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "geopotential_height_cloud_ceiling",
            "long_name": "Geopotential height",
            "units": "gpm",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "ingested_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "latitude",
            "long_name": "",
            "units": "degrees_north",
            "dimensions": "y × x"
        },
        {
            "name": "longitude",
            "long_name": "",
            "units": "degrees_east",
            "dimensions": "y × x"
        },
        {
            "name": "percent_frozen_precipitation_surface",
            "long_name": "Percent frozen precipitation",
            "units": "%",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "precipitable_water_atmosphere",
            "long_name": "Precipitable water",
            "units": "kg/(m^2)",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "precipitation_surface",
            "long_name": "Total Precipitation",
            "units": "mm/s",
            "comment": "Average precipitation rate since the previous forecast step.",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "pressure_reduced_to_mean_sea_level",
            "long_name": "Pressure reduced to MSL",
            "units": "Pa",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "pressure_surface",
            "long_name": "Surface pressure",
            "units": "Pa",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "relative_humidity_2m",
            "long_name": "2 metre relative humidity",
            "units": "%",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "temperature_2m",
            "long_name": "2 metre temperature",
            "units": "C",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "total_cloud_cover_atmosphere",
            "long_name": "Total Cloud Cover",
            "units": "%",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "valid_time",
            "long_name": "",
            "units": "seconds since 1970-01-01",
            "dimensions": "init_time × lead_time"
        },
        {
            "name": "wind_u_10m",
            "long_name": "10 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "wind_u_80m",
            "long_name": "U-component of wind (80 m above ground)",
            "units": "m/s",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "wind_v_10m",
            "long_name": "10 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × y × x"
        },
        {
            "name": "wind_v_80m",
            "long_name": "V-component of wind (80 m above ground)",
            "units": "m/s",
            "dimensions": "init_time × lead_time × y × x"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                NOAA HRRR forecast, 48 hour is a dataset containing 25 variables across 4
                dimensions, covering
                Continental United States at 3km resolution and
                Forecasts initialized 2018-07-13 12:00:00 UTC to Present at Forecasts initialized every 6 hours resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                forecasting and prediction models,
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/noaa/hrrr/forecast-48-hour/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>Sources</h3>
        <p>
        The source grib files this archive is constructed from are provided by
        <a href="https://www.noaa.gov/information-technology/open-data-dissemination">NOAA Open Data Dissemniation (NODD)</a>
        and accessed from the <a href="https://registry.opendata.aws/noaa-hrrr-pds/">AWS Open Data Registry</a>.
        </p>

        <h3>Data availability</h3>
        <p>
        Forecasts initialized through 2020-12-02T06 UTC include data
        only for the first 36 hours; steps 37–48 are filled with NaNs. Starting with
        the 2020-12-02T12 UTC initialization, forecasts cover the full 48 hours.
        </p>

        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        Icechunk storage generously provided by <a href="https://opendata.aws.amazon.com/">AWS Open Data</a>.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        floating point representation to improve compression. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information on this approach. The exact number of rounded bits
        can be found in our
        <a href="https://github.com/dynamical-org/reformatters/">reformatting code</a>.
        </p>

      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - NOAA HRRR forecast, 48 hour</div>
                    <div class="frameHeaderSubtitle">Maximum temperature in a forecast</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Maximum temperature in a forecast
# Dataset: NOAA HRRR forecast, 48 hour
# This code demonstrates how to access and process the NOAA HRRR forecast, 48 hour dataset


import xarray as xr  # xarray>=2025.1.2 and zarr>=3.0.8 for zarr v3 support

ds = xr.open_zarr("https://data.dynamical.org/noaa/hrrr/forecast-48-hour/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(init_time="2025-01-01T00", x=0, y=0, method="nearest").max().compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the NOAA HRRR forecast, 48 hour dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/noaa-hrrr-forecast-48-hour.ipynb">https://github.com/dynamical-org/notebooks/blob/main/noaa-hrrr-forecast-48-hour.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {},
      "source": [
        "# Quickstart: NOAA HRRR forecast 48 hour - dynamical.org Zarr\n",
        "A brief introduction to the NOAA HRRR forecast 48 hour dataset transformed into an analysis-ready, cloud-optimized format by dynamical.org.\n",
        "\n",
        "Dataset documentation: https://dynamical.org/catalog/noaa-hrrr-forecast-48-hour/"
      ],
      "outputs": []
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {},
      "outputs": [],
      "source": [
        "# If running locally, follow README.md for simple dependency installation.\n",
        "# If using Google Colab, run this cell and then restart the notebook.\n",
        "%pip install \"xarray[complete]>=2025.1.2\" \"zarr>=3.0.8\" requests aiohttp rioxarray pyproj\n",
        "# rioxarray and pyproj are used here for working with map projections"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 1,
      "metadata": {},
      "outputs": [],
      "source": [
        "import xarray as xr\n",
        "\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/noaa/hrrr/forecast-48-hour/latest.zarr?email=optional@email.com\", chunks=None)\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 2,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Plot a forecast of cloud cover at a point\n",
        "ds[\"total_cloud_cover_atmosphere\"].sel(\n",
        "    init_time=\"2025-01-01T00\", x=0, y=0, method=\"nearest\"\n",
        ").plot(x=\"valid_time\")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 3,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Plot 2 meter air temperature from a specific forecast and lead time\n",
        "(\n",
        "    ds[\"temperature_2m\"]\n",
        "    .sel(init_time=\"2020-04-01T00\", lead_time=\"6h\")\n",
        "    .plot(figsize=(8, 4), cmap=\"Spectral_r\")\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 4,
      "metadata": {},
      "outputs": [],
      "source": [
        "# HRRR data is distributed in a projected coordinate reference system and\n",
        "# we include its details in the dataset metadata (e.g. ds.rio.crs, ds.rio.transform()).\n",
        "\n",
        "# Use pyproj to transform the longitude and latitude of Fort Lauderdale, FL into dataset x, y coordinates\n",
        "import rioxarray  # for .rio accessor\n",
        "from pyproj import Transformer\n",
        "\n",
        "lon_lat_to_ds = Transformer.from_crs(\"EPSG:4326\", ds.rio.crs, always_xy=True)\n",
        "x, y = lon_lat_to_ds.transform(-80.1, 26.1)\n",
        "\n",
        "ds[\"precipitation_surface\"].sel(\n",
        "    init_time=\"2023-04-12T06\", x=x, y=y, method=\"nearest\"\n",
        ").plot(x=\"valid_time\")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 5,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Select a geographic area using (west, south, east, north) longitude/latitude coordinates\n",
        "(\n",
        "    ds[\"pressure_surface\"]\n",
        "    .rio.clip_box(-124, 35, -114, 50, crs=\"EPSG:4326\")\n",
        "    .sel(init_time=\"2025-08-01T00\", lead_time=\"12h\")\n",
        "    .plot(figsize=(6, 8), cmap=\"Greys\")\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 6,
      "metadata": {},
      "outputs": [],
      "source": [
        "# Clip to geometries\n",
        "\n",
        "# Here we use a list of one polygon that approximates the shape of the state of Utah\n",
        "roughly_utah = {\n",
        "    \"type\": \"Polygon\",\n",
        "    \"coordinates\": [\n",
        "        [\n",
        "            [-114.04, 41.99],\n",
        "            [-114.05, 37.00],\n",
        "            [-109.04, 36.99],\n",
        "            [-109.05, 40.99],\n",
        "            [-111.04, 40.99],\n",
        "            [-111.04, 42.00],\n",
        "            [-114.04, 41.99],\n",
        "        ]\n",
        "    ],\n",
        "}\n",
        "geometries = [roughly_utah]\n",
        "\n",
        "(\n",
        "    ds[\"pressure_surface\"]\n",
        "    .sel(init_time=\"2025-08-01T00\", lead_time=\"12h\")\n",
        "    # Optional: reproject to lat/lon to see vertical latitude and longitude lines\n",
        "    # .rio.reproject(\"EPSG:4326\")  \n",
        "    .rio.clip(geometries, crs=\"EPSG:4326\")\n",
        "    .plot(figsize=(6, 8), cmap=\"Greys\")\n",
        ")\n",
        "\n",
        "# To aggregate data over one or more geometries (e.g. countries, or arbitrary polygons),\n",
        "# see xvec library's zonal statistics functions: https://xvec.readthedocs.io/."
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 7,
      "metadata": {},
      "outputs": [],
      "source": [
        "from IPython.display import HTML\n",
        "from matplotlib.animation import FuncAnimation\n",
        "import matplotlib.pyplot as plt\n",
        "\n",
        "# An interactive animation of a 10 meter wind speed forecast\n",
        "\n",
        "forecast_ds = ds.sel(init_time=\"2025-07-09T00\")\n",
        "wind_speed_10m = (forecast_ds[\"wind_u_10m\"]**2 + forecast_ds[\"wind_v_10m\"]**2) ** 0.5\n",
        "# Reduce resolution. For full resolution skip the line below and set `plt.rcParams[\"animation.embed_limit\"] = 350 # MB`\n",
        "wind_speed_10m = wind_speed_10m.coarsen(x=4, y=4, boundary=\"trim\").mean() \n",
        "wind_speed_10m.load()\n",
        "\n",
        "dpi=150\n",
        "fig, ax = plt.subplots(figsize=(wind_speed_10m.x.size/dpi, wind_speed_10m.y.size/dpi), dpi=dpi)\n",
        "fig.subplots_adjust(left=0, right=1, top=1, bottom=0)\n",
        "ax.axis(\"off\")\n",
        "\n",
        "img = ax.imshow(wind_speed_10m.isel(lead_time=0), cmap='Blues_r')\n",
        "anim = FuncAnimation(fig=fig, frames=wind_speed_10m, func=lambda frame: img.set_data(frame), interval=120)\n",
        "\n",
        "HTML(anim.to_jshtml())"
      ]
    }
  ],
  "metadata": {
    "kernelspec": {
      "display_name": "notebooks",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 2
}</pre>
            </div>
        
    </div>

    <div class="content catalog-item">
        <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
            <h1>ECMWF IFS ENS Forecast, 15 day, 0.25 degree</h1>
        </div>
        <table>
            <tr>
                <td>Dataset url</td>
                <td>https://data.dynamical.org/ecmwf/ifs-ens/forecast-15-day-0-25-degree/latest.zarr</td>
            </tr>
            <tr>
                <td>Spatial domain</td>
                <td>Global</td>
            </tr>
            <tr>
                <td>Spatial resolution</td>
                <td>0.25 degrees (~20km)</td>
            </tr>
            <tr>
                <td>Time domain</td>
                <td>Forecasts initialized 2024-04-01 00:00:00 UTC to Present</td>
            </tr>
            <tr>
                <td>Time resolution</td>
                <td>Forecasts initialized every 24 hours</td>
            </tr>
            
                <tr>
                    <td>Forecast domain</td>
                    <td>Forecast lead time 0-360 hours (0-15 days) ahead</td>
                </tr>
                <tr>
                    <td>Forecast resolution</td>
                    <td>Forecast step 0-144 hours: 3 hourly, 144-360 hours: 6 hourly</td>
                </tr>
            
        </table>
        <h2>Description</h2>
        <p>
            
        <p>
        This dataset is an archive of past and present ECMWF IFS ENS forecasts.
        Forecasts are identified by an initialization time (<code>init_time</code>) 
        denoting the start time of the model run, as well as by the 
        <code>ensemble_member</code>. Along the <code>lead_time</code> dimension, 
        each forecast begins at a 3 hourly forecast step (0-144 hours) and switches 
        to a 6 hourly step for days 6 through 15 of the forecast (hours 144-360).
        This dataset contains the 00 UTC initialization times only.
        </p>
      
        </p>
        <!-- Structured metadata for LLMs -->
        <div class="llm-metadata">
            <pre class="llm-metadata">
{
    "dataset_name": "ECMWF IFS ENS Forecast, 15 day, 0.25 degree",
    "description_short": "Ensemble weather forecasts from the ECMWF Integrated Forecasting System (IFS).",
    "url": "https://data.dynamical.org/ecmwf/ifs-ens/forecast-15-day-0-25-degree/latest.zarr",
    "spatial_domain": "Global",
    "spatial_resolution": "0.25 degrees (~20km)",
    "time_domain": "Forecasts initialized 2024-04-01 00:00:00 UTC to Present",
    "time_resolution": "Forecasts initialized every 24 hours",
    "forecast_domain": "Forecast lead time 0-360 hours (0-15 days) ahead",
    "forecast_resolution": "Forecast step 0-144 hours: 3 hourly, 144-360 hours: 6 hourly",
    "dimensions": [
        {
            "name": "ensemble_member",
            "min": "0",
            "max": "50",
            "units": "realization"
        },
        {
            "name": "init_time",
            "min": "2024-04-01T00:00:00",
            "max": "Present",
            "units": "seconds since 1970-01-01"
        },
        {
            "name": "latitude",
            "min": "-90",
            "max": "90",
            "units": "degrees_north"
        },
        {
            "name": "lead_time",
            "min": "0 days 00:00:00",
            "max": "15 days 00:00:00",
            "units": "seconds"
        },
        {
            "name": "longitude",
            "min": "-180",
            "max": "179.75",
            "units": "degrees_east"
        }
    ],
    "variables": [
        {
            "name": "categorical_precipitation_type_surface",
            "long_name": "Categorical precipitation type at surface",
            "units": "0=No precipitation; 1=Rain; 2=Thunderstorm; 3=Freezing rain; 4=Mixed/ice; 5=Snow; 6=Wet snow; 7=Mixture of rain and snow; 8=Ice pellets; 9=Graupel; 10=Hail; 11=Drizzle; 12=Freezing drizzle; 13-191=Reserved; 192-254=Reserved for local use; 255=Missing",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "dew_point_temperature_2m",
            "long_name": "2 metre dewpoint temperature",
            "units": "C",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "downward_long_wave_radiation_flux_surface",
            "long_name": "Surface downward long-wave radiation flux",
            "units": "W/(m^2)",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "downward_short_wave_radiation_flux_surface",
            "long_name": "Surface downward short-wave radiation flux",
            "units": "W/(m^2)",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "expected_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "ingested_forecast_length",
            "long_name": "",
            "units": "seconds",
            "dimensions": "init_time"
        },
        {
            "name": "precipitation_surface",
            "long_name": "Total precipitation",
            "units": "mm/s",
            "comment": "Average precipitation rate since the previous forecast step.",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "pressure_reduced_to_mean_sea_level",
            "long_name": "Pressure reduced to MSL",
            "units": "Pa",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "pressure_surface",
            "long_name": "Surface pressure",
            "units": "Pa",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "temperature_2m",
            "long_name": "2 metre temperature",
            "units": "C",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "valid_time",
            "long_name": "",
            "units": "seconds since 1970-01-01",
            "dimensions": "init_time × lead_time"
        },
        {
            "name": "wind_u_100m",
            "long_name": "100 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "wind_u_10m",
            "long_name": "10 metre U wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "wind_v_100m",
            "long_name": "100 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        },
        {
            "name": "wind_v_10m",
            "long_name": "10 metre V wind component",
            "units": "m/s",
            "dimensions": "init_time × lead_time × ensemble_member × latitude × longitude"
        }
    ]
}
            </pre>
        </div>
        <h2>For LLMs & AI Assistants</h2>
        <div class="llm-context-info">
            <p>
                <strong>Dataset summary:</strong>
                ECMWF IFS ENS Forecast, 15 day, 0.25 degree is a dataset containing 15 variables across 5
                dimensions, covering
                Global at 0.25 degrees (~20km) resolution and
                Forecasts initialized 2024-04-01 00:00:00 UTC to Present at Forecasts initialized every 24 hours resolution.
            </p>
            <p>
                <strong>Key use cases:</strong>
                This dataset is suitable for
                forecasting and prediction models,
                
                data analysis, visualization, and scientific research related to this domain.
            </p>
            <p>
                <strong>Access pattern:</strong>
                Use this URL with optional email parameter to access this dataset programmatically: https://data.dynamical.org/ecmwf/ifs-ens/forecast-15-day-0-25-degree/latest.zarr
            </p>
        </div>
        <h2>Details</h2>
        <p>
            
        <h3>License</h3>
        <p>
        This data is based on data and products of the European Centre for
        Medium-Range Weather Forecasts (ECMWF). Use is governed by the CC-BY-4.0
        license and the ECMWF <a href='https://apps.ecmwf.int/datasets/licences/general/'>Terms of Use</a>.
        </p>

        <h3>Source</h3>
        <p>
        The source grib files this archive is contructed from are provided by
        <a href="https://www.ecmwf.int/en/forecasts/datasets/open-data">ECMWF Open Data</a>
        and accessed from the <a href="https://registry.opendata.aws/ecmwf-forecasts/">AWS Open Data Registry</a>.
        </p>
        <p>ECMWF does not provide user support for the free & open datasets. Users should refer to the public <a href='https://apps.ecmwf.int/forum/'>User Forum</a> for any questions related to the source meterial.</p>

        <h3>Data availability</h3>
        <p>
        This dataset contains only forecasts initialized on or after 2024-04-01, 
        which are available at the open data 0.25 degree (~20km) resolution.
        All variables are available for the full period, save for 
        <code>precipitation_surface</code>, which is filled with NaNs 
        before 2024-11-13 UTC.
        </p>

        <h3>Ensemble members</h3>
        <p>
        Each forecast contains 51 ensemble members, including a control member (0) 
        and 50 perturbed members (1-50). The control forecast is produced with 
        the best available data and unperturbed models. The other 50 members 
        are each produced with slight perturbations of initial conditions 
        and of the models. Taken together, ensemble of 51 forecasts shows 
        the range of possible outcomes and the likelihood of their occurrence.
        </p>

        <h3>Storage</h3>
        <p>
        Storage for this dataset is generously provided by
        <a href="https://source.coop/">Source Cooperative</a>,
        a <a href="https://radiant.earth/">Radiant Earth</a> initiative.
        Icechunk storage generously provided by <a href="https://opendata.aws.amazon.com/">AWS Open Data</a>.
        </p>

        <h3>Compression</h3>
        <p>
        The data values in this dataset have been rounded in their binary
        floating point representation to improve compression. See
        <a href="https://www.nature.com/articles/s43588-021-00156-2">Klöwer et al. 2021</a>
        for more information on this approach. The exact number of rounded bits
        can be found in our
        <a href="https://github.com/dynamical-org/reformatters/blob/main/src/reformatters/ecmwf/ifs_ens/forecast_15_day_0_25_degree/template_config.py">reformatting code</a>.
        </p>
      
        </p>
        <h2>Examples</h2>
        <h3>Brief example usage:</h3>
        
            <div class="frame">
                <div class="frameHeader">
                    <div class="frameHeaderTitle">dynamical.org - ECMWF IFS ENS Forecast, 15 day, 0.25 degree</div>
                    <div class="frameHeaderSubtitle">Maximum temperature in ensemble</div>
                </div>
                <pre class="frameContent frameContentDesktop"><code class="language-python">
# Example: Maximum temperature in ensemble
# Dataset: ECMWF IFS ENS Forecast, 15 day, 0.25 degree
# This code demonstrates how to access and process the ECMWF IFS ENS Forecast, 15 day, 0.25 degree dataset


import xarray as xr  # xarray>=2025.1.2 and zarr>=3.0.8 for zarr v3 support

ds = xr.open_zarr("https://data.dynamical.org/ecmwf/ifs-ens/forecast-15-day-0-25-degree/latest.zarr?email=optional@email.com")
ds["temperature_2m"].sel(init_time="2025-01-01T00", latitude=0, longitude=0).max().compute()
    </code></pre>
                <div class="example-notes">
                    <p>
                        <strong>What this example does:</strong>
                        This code demonstrates accessing the ECMWF IFS ENS Forecast, 15 day, 0.25 degree dataset and processing its data.</p>
                    <p>
                        <strong>Key components:</strong>
                        Data loading, processing, and potentially visualization of the dataset variables.</p>
                </div>
            </div>
        
        
            <div class="notebook-content">
                <h3>Python notebook example usage:</h3>
                
                <div class="example-source">Source:
                    <a href="https://github.com/dynamical-org/notebooks/blob/main/ecmwf-ifs-ens-forecast-15-day-0-25-degree.ipynb">https://github.com/dynamical-org/notebooks/blob/main/ecmwf-ifs-ens-forecast-15-day-0-25-degree.ipynb</a>
                </div>
                <pre>{
  "cells": [
    {
      "cell_type": "markdown",
      "metadata": {
        "id": "QZI73W2Px_dm"
      },
      "source": [
        "# Quickstart: ECMWF IFS ENS forecast, 15 day, 0.25 degree - dynamical.org Zarr\n",
        "A brief introduction to the ECMWF IFS Ensemble forecast dataset transformed into an analysis-ready, cloud-optimized format by dynamical.org.\n",
        "\n",
        "Dataset documentation: https://dynamical.org/catalog/ecmwf-ifs-ens-forecast-15-day-0-25-degree/\n",
        "\n",
        "Dataset licenced [CC-BY-4.0](https://creativecommons.org/licenses/by/4.0/) and [ECMWF Terms of Use](https://apps.ecmwf.int/datasets/licences/general/)\n"
      ],
      "outputs": []
    },
    {
      "cell_type": "code",
      "execution_count": null,
      "metadata": {
        "id": "z9s8BGV7x_do"
      },
      "outputs": [],
      "source": [
        "# If running locally, follow README.md for simple dependency installation.\n",
        "# If using Google Colab, run this cell and then restart the notebook.\n",
        "%pip install \"xarray[complete]>=2025.1.2\" \"zarr>=3.0.8\" requests aiohttp"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 1,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 732
        },
        "id": "8K9fcHtKx_dp",
        "outputId": "63803074-efdd-46ef-9ba0-4f27f0d8843e"
      },
      "outputs": [],
      "source": [
        "import xarray as xr\n",
        "\n",
        "ds = xr.open_zarr(\"https://data.dynamical.org/ecmwf/ifs-ens/forecast-15-day-0-25-degree/latest.zarr?email=optional@email.com\", chunks=None)\n",
        "ds"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 2,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 472
        },
        "id": "C9HjFKSCWdbD",
        "outputId": "46535c9c-44ef-431c-ca9e-6a72b22a7b23"
      },
      "outputs": [],
      "source": [
        "# Plot the ensemble traces for one forecast and variable at a point on the earth\n",
        "plot_ds = ds.sel(init_time=\"2024-08-21T00\", latitude=19.75, longitude=-155.0, method=\"nearest\")  # Hilo, Island of Hawai'i\n",
        "_ = plot_ds[\"precipitation_surface\"].plot(x=\"valid_time\", hue=\"ensemble_member\", add_legend=False)"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 3,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 585
        },
        "id": "Zft5N_BVyZ7V",
        "outputId": "a11481f6-23d6-4bc2-df7c-b3b3f39c31a8"
      },
      "outputs": [],
      "source": [
        "# Getting a little fancier with our plotting: a nicer visualization of the ensemble for that same forecast\n",
        "\n",
        "import matplotlib.pyplot as plt\n",
        "\n",
        "plot_ds = ds.sel(init_time=\"2024-08-21T00\", latitude=19.75, longitude=-155.0, method=\"nearest\")\n",
        "fig, ax = plt.subplots(1, 1, figsize=(10, 6))\n",
        "\n",
        "( # Plot all the perturbed members (ensemble_members 1 through 51) with low opacity\n",
        "    plot_ds[\"precipitation_surface\"]\n",
        "    .sel(ensemble_member=slice(1, 51))\n",
        "    .plot(x=\"valid_time\", hue=\"ensemble_member\", ax=ax, alpha=0.4, label=\"Perturbed ensemble members\")\n",
        ")\n",
        "( # Plot the control (ensemble_member 0) on top in black\n",
        "    plot_ds[\"precipitation_surface\"]\n",
        "    .sel(ensemble_member=0)\n",
        "    .plot(x=\"valid_time\", ax=ax, color=\"black\", label=\"Control ensemble member\")\n",
        ")\n",
        "\n",
        "# Clean up legend, use one legend entry for all 50 perturbed members\n",
        "handles, labels = ax.get_legend_handles_labels()\n",
        "ax.legend(handles[-2:], labels[-2:])  \n",
        "ax.set_title(\"Control + Perturbed members for the 2024-08-21 precipitation forecast for Hilo, Hawai'i\\n(4 days before Hurricane Hone reached the Big Island)\")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 4,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 450
        },
        "id": "HLd1Htuux_dr",
        "outputId": "297c2b7a-ce7c-4d8c-e093-a4ac86f72101"
      },
      "outputs": [],
      "source": [
        "# Plot a summary of the ensemble distribution using quantiles\n",
        "plot_ds = ds.sel(init_time=\"2025-01-01T00\", latitude=0, longitude=0)\n",
        "(\n",
        "    plot_ds[\"temperature_2m\"]\n",
        "    .quantile([0.05, 0.25, 0.5, 0.75, 0.95], dim=\"ensemble_member\")\n",
        "    .plot(x=\"valid_time\", hue=\"quantile\")\n",
        ")"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 5,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 472
        },
        "id": "vMgD0XA1x_dr",
        "outputId": "5f5adedb-acd3-4c4d-a23c-990a0974b5a1"
      },
      "outputs": [],
      "source": [
        "# Calculate a quantile across ensemble members and display the result as a map\n",
        "(\n",
        "    ds[\"temperature_2m\"]\n",
        "    .sel(init_time=\"2024-10-01T00\")\n",
        "    .sel(lead_time=\"7d\")\n",
        "    .sel(latitude=slice(25, 5), longitude=slice(-100, -65)) # Central America and the Caribbean\n",
        "    .quantile(0.25, dim=\"ensemble_member\") # 25% chance it gets colder than this\n",
        "    .plot()\n",
        ");"
      ]
    },
    {
      "cell_type": "code",
      "execution_count": 6,
      "metadata": {
        "colab": {
          "base_uri": "https://localhost:8080/",
          "height": 487
        },
        "id": "C1hgffkSZwg-",
        "outputId": "bdb774ea-90cf-416d-9871-423648e15712"
      },
      "outputs": [],
      "source": [
        "# Highlight areas of uncertainty in a 15 day temperature forecast\n",
        "\n",
        "plot_ds = ds.sel(init_time=\"2024-04-03T00\", latitude=slice(40, 5), longitude=slice(70, 105))\n",
        "\n",
        "# Standard deviation across ensemble members to highlight regions of forecast uncertainty\n",
        "plot_ds[\"temperature_2m\"].std(dim=\"ensemble_member\").mean(dim=\"lead_time\").plot()\n",
        "plt.title(f\"Ensemble standard deviation 2 meter temperature [{ds['temperature_2m'].attrs['units']}]\")"
      ]
    }
  ],
  "metadata": {
    "colab": {
      "provenance": []
    },
    "kernelspec": {
      "display_name": ".venv",
      "language": "python",
      "name": "python3"
    },
    "language_info": {
      "codemirror_mode": {
        "name": "ipython",
        "version": 3
      },
      "file_extension": ".py",
      "mimetype": "text/x-python",
      "name": "python",
      "nbconvert_exporter": "python",
      "pygments_lexer": "ipython3",
      "version": "3.12.3"
    }
  },
  "nbformat": 4,
  "nbformat_minor": 0
}</pre>
            </div>
        
    </div>
